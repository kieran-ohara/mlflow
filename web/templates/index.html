<html>

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Hello</title>
    <style>
        #canvas {
            border: 1px solid grey;
            width: 112px;
            height: 112px;
            position: static;
        }
    </style>
</head>

<body>
    <h1>Recognise my handwriting</h1>
    <canvas id="canvas"></canvas>
    <button id="canvasToFile">File From Canvas</button>
    <form method="post" action="/submit" enctype="multipart/form-data">
        <input id="fileInput" type="file" name="file" />
        <input type="submit" />
    </form>

    <script src="/static/canvas.js" type="text/javascript"></script>

    <script type="text/javascript">
        var canvas = document.querySelector('#canvas')
        var fileInput = document.querySelector('#fileInput')
        var canvasToFile = document.querySelector('#canvasToFile')

        canvasToFile.addEventListener('click', () => {
            canvas.toBlob((blob) => {
                const file = new File([blob], "canvas.png");
                const dataTransfer = new DataTransfer();
                dataTransfer.items.add(file);
                fileInput.files = dataTransfer.files;
            });
        })
    </script>

</body>

</html>